# Multi-workflow configurations for Railway / Render / local
# Copy env vars per service when creating multiple workers.
#
# Two dimensions:
#   1. Prompt choice: explorer (100% explore) | exploiter (100% exploit) | balanced (UI ratio).
#   2. Extraction focus: frame (per-frame / pure static only) | window (per-window blends only).
# Set LOOP_EXTRACTION_FOCUS so that 2 workers do frame and 1 does window.
#
# Recommended: Explorer + Exploiter = frame (2 frame workers). Balanced = window (1 window worker).

workflows:
  explorer:
    description: "Frame-focused — 100% explore; per-frame extraction + static registry only; authentic names"
    env:
      API_BASE: https://motion.productions
      LOOP_EXPLOIT_RATIO_OVERRIDE: "0"
      LOOP_WORKFLOW_TYPE: "explorer"
      LOOP_EXTRACTION_FOCUS: "frame"

  balanced:
    description: "Window-focused — uses webapp config (exploit/explore ratio); per-window extraction + dynamic + narrative"
    env:
      API_BASE: https://motion.productions
      LOOP_EXTRACTION_FOCUS: "window"
      # LOOP_WORKFLOW_TYPE: "main"  # optional, for badge on site

  exploiter:
    description: "Frame-focused — 100% exploit; per-frame extraction + static registry only; authentic names"
    env:
      API_BASE: https://motion.productions
      LOOP_EXPLOIT_RATIO_OVERRIDE: "1"
      LOOP_WORKFLOW_TYPE: "exploiter"
      LOOP_EXTRACTION_FOCUS: "frame"

  interpretation:
    description: "Interpretation only — no create/render; fills interpretation registry (D1) for main pipeline"
    start_command: "python scripts/interpret_loop.py"
    env:
      API_BASE: https://motion.productions
      INTERPRET_DELAY_SECONDS: "10"
